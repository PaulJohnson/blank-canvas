<html>
    <head>
        <title>Blank Canvas</title>
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" src="jquery-json.js"></script>
    </head>
    <body style="padding: 0px; margin: 0px; border:0px">
        <div id="canvas"></div>
        <script type="text/javascript">
            var t; // global timeout variable
            function getContext() {
                    var canvas = document.getElementById("canvas");
                    if (canvas.getContext) {
                        return canvas.getContext("2d");
                    }
                    alert("no canvas");
            }
            function register(name) {
                $(document).bind(name,function (e){
                        $.ajax({ url: "/event",
                         type: "POST",
                         data: $.toJSON([name,e.which,e.pageX, e.pageY]),
                         contentType: "application/json; charset=utf-8",
                         dataType: "json"});
                });
            }  
            function redraw() {
                $.ajax({ url: "/canvas",
                         type: "GET",
                         dataType: "script"}); // desired response type
             }
             
            $(document).ready(function() {
                // Make the canvas the size of the window
                var w = $(window).width();
                var h = $(window).height();

                $("#canvas").replaceWith(
                            '<canvas id="canvas" width="' + w + '" height="' + h +
                            '" style="border: blue solid 0px; padding: 0px; margin: 0px"></canvas>');

                 // start the server-side
                $.ajax({ url: "/start",
                         type: "POST",
                         data: $.toJSON([w,h]),
                         contentType: "application/json; charset=utf-8",
                         dataType: "json"}); // desired response type

                // and ask for the first drawing
                redraw();
            });
        </script>
    </body>
</html>
